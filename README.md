# Assessing the Reproducibility of Neuroimaging Pipelines for Human Retinotopic Mapping

This project investigates whether the variability observed in retinotopic maps across individuals reflects genuine neurobiological differences or artifacts introduced by preprocessing pipelines in functional neuroimaging. Specifically, we assess how different cortical surface definitions (pial, white, mid-thickness) influence the predicted visual field maps generated by **DeepRetinotopy**, a geometric deep learning model trained on cortical anatomy.

Retinotopic mapping refers to the topographic representation of the visual field on the cortical surface. While early visual areas (V1‚ÄìV3) are generally assumed to follow a canonical mirror-symmetric layout, recent studies have shown substantial inter-individual variability, particularly in extrastriate areas V2 and V3. This raises an important question: are atypical maps a true reflection of individual neuroanatomy, or do they emerge from segmentation errors and other processing inconsistencies?

Using the **NYU Retinotopy Dataset** (which was not used in the training of DeepRetinotopy), we systematically compared predicted maps across three surface types. Our results show that the model is generally robust to surface changes, but significant deviations can occur‚Äîespecially with the pial surface‚Äîhighlighting the importance of quality control in surface reconstruction and model interpretation.

## üìÅ Dataset

This project uses the **NYU Retinotopy Dataset**, a publicly available collection of high-resolution anatomical and functional MRI scans suitable for retinotopic analysis.

### üîó Dataset Access

You can access the dataset via [https://openneuro.org/datasets/ds003787/versions/1.0.1](https://openneuro.org/datasets/ds003787/versions/1.0.1):

- **Dataset name**: NYU Retinotopy Dataset  
- **DOI**: [10.18112/openneuro.ds004217.v1.0.0](https://doi.org/10.18112/openneuro.ds003787.v1.0.1)  
- **License**: CC0 Public Domain Dedication

After downloading the dataset, the folder nyu_retinotopy_data/derivatives/freesurfer contains surface reconstructions for all subjects. This is the primary directory used for generating anatomical features and running predictions with DeepRetinotopy.

To simplify testing and reduce compute overhead, we selectively copy subjects with atypical maps into a new working folder:

   ```bash
   mkdir -p nyu_retinotopy_data/freesurfer_test

   # Example: manually copy atypical subjects (based on classification)
   cp -r nyu_retinotopy_data/freesurfer/sub-wlsubjXXX nyu_retinotopy_data/freesurfer_test/
   ```

---

## üß™ Computational Environment: Neurodesk

All processing and analysis in this project were conducted using [**Neurodesk**](https://www.neurodesk.org/), a modular and reproducible platform for neuroimaging research. Neurodesk provides containerized versions of neuroimaging tools that can be run locally or in the cloud.

### üöÄ Why Neurodesk?

- **Reproducibility**: All tools (FreeSurfer, Python, MATLAB, etc.) run in standardized containers.
- **Portability**: Compatible with desktop, HPC, and cloud environments.
- **Convenience**: Preconfigured neuroimaging software stack with GUI and CLI support.

### üõ† Setup Instructions (Local or Virtual Environment)

1. Launch Neurodesk:
   - Select environment and system to setup
   - Follow the instructions [**Neurodesk**](https://www.neurodesk.org/)

2. Navigate to the storage folder:
   ```bash
   cd /neurodesktop-storage
   ```
